<head>
    <!-- <link rel="stylesheet" href="rating.min.css"> -->
</head>

<nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <img src="/reel.png" width="60px" height="60px">
                <a class="navbar-brand page-scroll" href="/session/homepage">#TeleVisioExpress</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <% if @user %>
                    <li>
                        <!-- <lable><%= @user.username %></lable> -->
                        <a class="page-scroll" href="/session/destroy">Logout</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="/session/profile"><%= @user.username %></a>
                    </li>
                    <% else %>
                    <li>
                        <a class="page-scroll" href="/welcome/register">Register/Login</a>
                    </li>
                    <% end %>
                    <li>
                        <a class="page-scroll" href="/discover/discover_shows">Discover</a>
                    </li>
                    <!-- <li>
                        <a class="page-scroll" href="#portfolio">Portfolio</a>
                    </li> -->
<!--                     <li>
                        <a class="page-scroll" href="#about">About</a>
                    </li> -->
                    <li>
                        <a class="page-scroll" href="/session/team">Team</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
    
<br><br><br><br><br><br><br><br><br><br>

<div class="view_review">
    <h3><%= @rating_this_show.name %></h3>
    <h4><%= @rating_this_season.season_name %></h4>
    <form method="post" action="/session/tvshows/season/rating">
        <input type="hidden" name="seasons_id" value="<%= @rating_this_season.id %>"></input>
        Give rating below<br>
        <!-- <input type="number" min=1 max=10 value=1 name="rating" required></input><br> -->
        <div id="shop"></div>
        <input type="hidden" id="rating" name="rating" value="0"></input>
        <input type="submit" value="Give Rating"></input>
    </form>
</div>

<!-- <script src="rating.min.js"></script> -->
<script>

  /**
   * Demo in action!
   */
  (function() {

    'use strict';

    var rated;

    // SHOP ELEMENT
    var shop = document.querySelector('#shop');

    // DUMMY DATA
    var data = [
      {
        rating: null
      }
    ];

    // INITIALIZE
    (function init() {
      for (var i = 0; i < data.length; i++) {
        addRatingWidget(buildShopItem(data[i]), data[i]);
      }
    })();

    // BUILD SHOP ITEM
    function buildShopItem(data) {
      var shopItem = document.createElement('div');

      var html =
        '<div class="c-shop-item__details">' +
          '<ul class="c-rating"></ul>' +
        '</div>';

      shopItem.classList.add('c-shop-item');
      shopItem.innerHTML = html;
      shop.appendChild(shopItem);

      return shopItem;
    }

    // ADD RATING WIDGET
    function addRatingWidget(shopItem, data) {
      var ratingElement = shopItem.querySelector('.c-rating');
      var currentRating = data.rating;
      var maxRating = 10;
      var callback = function(rating) { 
            // alert(rating);
            rated = rating;
            document.getElementById('rating').value = rated; 
        };
      var r = rating(ratingElement, currentRating, maxRating, callback);
    }

  })();

</script>